name: wechat-work-bot
on:
  issues:
    types: [opened, edited, milestoned, reopened]
  pull_request:
    branches:
      - master
    types: [assigned, opened, synchronize, reopened]
jobs:
  send-msg:
    runs-on: ubuntu-latest
    env:
      WECHAT_WORK_BOT_WEBHOOK: ${{secrets.WECHAT_WORK_BOT_WEBHOOK}}
    steps:
      - name: WeChat Work notification by markdown on issues event
        if: github.event_name == 'issues'
        uses: chf007/action-wechat-work@master
        with:
          msgtype: markdown
          content: "â° ä»Šå¤© [${{github.repository}}](https://github.com/${{github.repository}}) <font color=\"warning\"> è¿˜æœ‰æœªå¤„ç†çš„å®¢æˆ·é—®é¢˜å“¦ï¼Œè¯·åŠæ—¶å¤„ç†</font>ğŸš— ğŸš— ğŸš— \n
          > é—®é¢˜ç¼–å·: [<font color=\"info\">${{github.event.issue.number}}</font>](${{github.event.issue.html_url}}) \n
          > é—®é¢˜æ ‡é¢˜: <font color=\"info\">${{github.event.issue.title}}</font> \n"
          mentioned_list: '["@all"]'
      - name: WeChat Work notification by markdown on pull_request event
        if: github.event_name == 'pull_request'
        uses: chf007/action-wechat-work@master
        with:
          msgtype: markdown
          content: "â° ä»Šå¤© [${{github.repository}}](https://github.com/${{github.repository}}) <font color=\"warning\"> è¿˜æœ‰æœªå¤„ç†çš„ pr å“¦ï¼Œè¯·åŠæ—¶å¤„ç†</font>ğŸš— ğŸš— ğŸš— \n
            > pr ç¼–å·: [<font color=\"info\">${{github.event.pull_request.number}}</font>](${{github.event.pull_request.html_url}}) \n
            > pr æ ‡é¢˜: <font color=\"comment\">${{github.event.pull_request.title}}</font>"
          mentioned_list: '["@all"]'
